# 🚀 日本株価分析ツール v4.2 - 分析機能分離版

## ✨ 新機能: 分析機能の分離

### 🎯 主要な改善点

#### 1. **ファンダメンタルズ分析の独立**
- **専用ページ**: ファンダメンタルズ分析専用の独立したページ
- **詳細分析**: 財務健全性、収益性、成長性、効率性の詳細分析
- **バリュエーション**: 内在価値、公正価値、目標株価の算出
- **業界比較**: セクター内での相対的な評価

#### 2. **テクニカル分析の独立**
- **専用ページ**: テクニカル分析専用の独立したページ
- **チャート分析**: 価格チャート、出来高、テクニカル指標の統合表示
- **トレンド分析**: トレンド方向、強度、サポート・レジスタンスの分析
- **シグナル分析**: 買い・売りシグナルの検出と信頼度評価

#### 3. **分析対象の多様化**
- **個別銘柄分析**: 単一銘柄の詳細分析
- **セクター分析**: 業界全体の分析と比較
- **市場全体分析**: 主要指数の分析
- **カスタムリスト分析**: ユーザー指定銘柄の一括分析

### 📊 ファンダメンタルズ分析機能

#### 分析項目
- **財務健全性**: 流動比率、負債比率、自己資本比率
- **収益性分析**: ROE、ROA、売上高利益率
- **成長性分析**: 売上成長率、利益成長率、資産成長率
- **効率性分析**: 総資産回転率、在庫回転率
- **流動性分析**: 当座比率、現金比率
- **レバレッジ分析**: 負債対自己資本比率、インタレスト・カバレッジ
- **配当分析**: 配当利回り、配当成長率
- **バリュエーション**: PER、PBR、PEG、EV/EBITDA
- **業界比較**: 同業他社との相対評価
- **トレンド分析**: 過去数年間の財務指標の推移

#### 分析対象
- **個別銘柄**: 単一銘柄の詳細なファンダメンタルズ分析
- **セクター**: 業界全体の財務指標の比較分析
- **市場全体**: 主要指数のファンダメンタルズ分析
- **カスタムリスト**: 複数銘柄の一括分析

### 📈 テクニカル分析機能

#### テクニカル指標
- **移動平均線**: 単純移動平均、指数移動平均
- **ボリンジャーバンド**: 価格の変動範囲の分析
- **RSI**: 相対力指数による過買い・過売り判定
- **MACD**: 移動平均収束発散によるトレンド分析
- **ストキャスティクス**: オシレーター系指標
- **ウィリアムズ%R**: モメンタム指標
- **CCI**: 商品チャンネル指数
- **ADX**: 平均方向性指数
- **パラボリックSAR**: トレンド転換点の検出
- **一目均衡表**: 日本発のテクニカル指標
- **フィボナッチリトレースメント**: 価格の戻り率分析

#### 分析機能
- **価格チャート**: ローソク足、出来高、移動平均線の統合表示
- **トレンド分析**: トレンド方向、強度、サポート・レジスタンス
- **シグナル分析**: 買い・売りシグナルの検出
- **短期予測**: 翌日、翌週の価格予測
- **信頼度評価**: 分析結果の信頼度スコア

#### 時間軸
- **1分**: 超短期分析
- **5分**: 短期分析
- **15分**: 中期分析
- **30分**: 中長期分析
- **1時間**: 長期分析
- **1日**: 日足分析
- **1週間**: 週足分析
- **1ヶ月**: 月足分析

### 🛠️ 技術スタック

#### 新規追加
- **分離された分析ページ**: 独立した分析機能
- **モジュラー設計**: 各分析機能の独立性
- **統合されたUI**: 一貫したユーザーインターフェース

#### 既存技術
- **Python 3.12+**
- **Streamlit**: Webアプリケーションフレームワーク
- **Plotly**: インタラクティブなチャート表示
- **Pandas/NumPy**: データ分析
- **SQLite**: データベース管理
- **キャッシュシステム**: 高速データアクセス

### 📦 インストール

#### 1. リポジトリのクローン
```bash
git clone https://github.com/yamaryu999/stockAnalysis.git
cd stockAnalysis
```

#### 2. 仮想環境の作成とアクティベート
```bash
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# または
venv\Scripts\activate     # Windows
```

#### 3. 依存関係のインストール
```bash
pip install -r requirements.txt
```

#### 4. アプリケーションの起動

##### 分析機能分離版（推奨）
```bash
# 自動起動スクリプトを使用
./run_improved.sh

# テスト付きで起動
./run_improved.sh --test

# 手動で起動
streamlit run app_improved.py --server.port 8505
```

##### 従来版
```bash
# Enhanced UI版
streamlit run app_ui_enhanced.py --server.port 8504

# 従来版
streamlit run app.py --server.port 8501
```

### 🎯 使用方法

#### 1. **ダッシュボード**
- 📊 リアルタイムメトリック表示
- 📈 市場概要チャート
- 🏭 セクター別パフォーマンス
- ⚡ システム状態監視

#### 2. **スクリーニング**
- 🔍 高度なスクリーニング条件
- 💰 財務指標フィルター
- 📊 市場データフィルター
- 🎯 投資戦略選択

#### 3. **ファンダメンタルズ分析**
- 📊 個別銘柄の詳細分析
- 🏭 セクター全体の比較分析
- 📈 市場全体の分析
- 📋 カスタムリストの一括分析

#### 4. **テクニカル分析**
- 📈 価格チャートとテクニカル指標
- 🎯 トレーディングシグナル
- 📊 トレンド分析
- 🔮 短期予測

#### 5. **AI分析**
- 🧠 人工知能による市場分析
- 🎯 AI推奨銘柄
- 📊 信頼度スコア表示
- 🔍 詳細分析根拠

#### 6. **システム状態**
- 💾 データベース統計
- 🗄️ キャッシュ統計
- 🔧 システム管理機能
- 📊 パフォーマンス監視

### 📱 アクセス方法

- **分析機能分離版**: http://localhost:8505
- **Enhanced UI**: http://localhost:8504
- **従来版**: http://localhost:8501

### 🧪 テスト

#### テストの実行
```bash
# 全テストを実行
python test_improvements.py

# 起動スクリプトでテスト付き起動
./run_improved.sh --test
```

#### テスト内容
- **データベーステスト**: データの保存・取得・検証
- **キャッシュテスト**: キャッシュの動作確認
- **設定テスト**: 設定管理の動作確認
- **エラーハンドリングテスト**: エラー処理の動作確認
- **分析機能テスト**: 分離された分析機能の動作確認

### 📊 分析機能の詳細

#### ファンダメンタルズ分析の特徴
- **包括的分析**: 財務健全性から成長性まで包括的に分析
- **業界比較**: 同業他社との相対的な評価
- **トレンド分析**: 過去数年間の財務指標の推移
- **バリュエーション**: 複数の手法による価値評価
- **信頼度評価**: 分析結果の信頼度スコア

#### テクニカル分析の特徴
- **多様な指標**: 12種類のテクニカル指標
- **統合チャート**: 価格、出来高、指標の統合表示
- **シグナル検出**: 自動的な買い・売りシグナルの検出
- **短期予測**: 機械学習による価格予測
- **信頼度評価**: 予測の信頼度スコア

### 🔧 設定

#### 分析設定
```yaml
analysis:
  max_stocks_per_analysis: 1000
  default_period: "1y"
  min_data_points: 30
  confidence_threshold: 0.7
  enable_ml_analysis: true
  enable_news_analysis: true
  enable_technical_analysis: true
```

#### ファンダメンタルズ分析設定
- **分析項目**: 選択可能な分析項目
- **比較期間**: 1年、2年、3年、5年、全期間
- **業界比較**: 有効/無効の設定
- **バリュエーション**: 使用する評価手法の選択

#### テクニカル分析設定
- **テクニカル指標**: 使用する指標の選択
- **チャート期間**: 1日〜5年
- **時間軸**: 1分〜1ヶ月
- **シグナル感度**: シグナル検出の感度設定

### 📈 パフォーマンス改善

#### 分析機能の分離による改善
- **専門性向上**: 各分析機能の専門性が向上
- **使いやすさ**: 目的に応じた分析機能の選択
- **パフォーマンス**: 必要な機能のみの実行
- **保守性**: 各機能の独立した保守

#### 処理速度の向上
- **並列処理**: 複数銘柄の並列分析
- **キャッシュ活用**: 分析結果のキャッシュ
- **最適化**: 各分析機能の最適化

### 🎨 ユーザーインターフェース

#### 分離された分析ページ
- **独立したUI**: 各分析機能の専用インターフェース
- **一貫したデザイン**: 統一されたデザイン言語
- **直感的操作**: 分かりやすい操作フロー
- **レスポンシブ**: モバイル・タブレット対応

#### ナビゲーション
- **明確な分類**: 分析機能の明確な分類
- **クイックアクセス**: よく使う機能への素早いアクセス
- **状態表示**: 現在の分析状態の表示

### 🔄 今後の予定

#### v4.3 予定機能
- **リアルタイム分析**: リアルタイムでの分析結果更新
- **アラート機能**: 分析結果に基づくアラート
- **レポート生成**: 分析結果のレポート生成
- **データエクスポート**: 分析結果のエクスポート

#### v5.0 予定機能
- **機械学習強化**: より高度なAI分析
- **クラウド対応**: クラウドベースの分析
- **API提供**: 外部システムとの連携
- **多言語対応**: 英語、中国語対応

### 🤝 貢献

プルリクエストやイシューの報告を歓迎します。

#### 開発環境のセットアップ
```bash
# 開発用依存関係のインストール
pip install -r requirements-dev.txt

# テストの実行
python -m pytest tests/

# コードフォーマット
black .
flake8 .
```

### 📞 サポート

問題が発生した場合は、GitHubのIssuesページで報告してください。

#### トラブルシューティング
1. **ログの確認**: `logs/` ディレクトリのログファイルを確認
2. **データベースの確認**: データベースファイルの整合性チェック
3. **キャッシュのクリア**: キャッシュファイルの削除
4. **設定のリセット**: 設定ファイルの再生成

---

**注意**: このツールは投資アドバイスではありません。投資判断は自己責任で行ってください。

**ライセンス**: MIT License

**開発者**: yamaryu

**GitHub**: https://github.com/yamaryu999/stockAnalysis
